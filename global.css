@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* --- LIGHT MODE (Default) --- */
    /* Apple-grade Light Gray Background - Enhanced Contrast */
    --background-rgb: 250 250 252;
    --foreground-rgb: 20 20 22;

    /* Core Palette */
    --king-orange: 255 140 0;
    --king-gold: 212 175 55;

    /* Glass Tokens - Light - Enhanced visibility */
    --glass-bg: rgba(255, 255, 255, 0.85);
    --glass-bg-hover: rgba(255, 255, 255, 0.95);
    --glass-border: rgba(0, 0, 0, 0.1);
    --glass-border-bright: rgba(0, 0, 0, 0.18);
    --glass-shadow: 0 4px 24px -1px rgba(0, 0, 0, 0.08);

    /* Mesh Gradients - Light */
    --mesh-1: rgba(255, 140, 0, 0.08);
    --mesh-2: rgba(212, 175, 55, 0.05);
  }

  .dark {
    /* --- DARK MODE --- */
    --background-rgb: 5 5 5;
    --foreground-rgb: 255 255 255;

    /* Glass Tokens - Dark */
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-bg-hover: rgba(255, 255, 255, 0.06);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-border-bright: rgba(255, 255, 255, 0.15);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);

    /* Mesh Gradients - Dark */
    --mesh-1: rgba(255, 140, 0, 0.15);
    --mesh-2: rgba(212, 175, 55, 0.05);
  }

  body {
    color: rgb(var(--foreground-rgb));
    background-color: rgb(var(--background-rgb));
    min-height: 100vh;
    @apply antialiased selection:bg-orange-500/30 selection:text-foreground transition-colors duration-500;

    /* Sovereign Mesh Background - Theme Aware */
    background-image: radial-gradient(circle at 15% 15%,
        var(--mesh-1) 0%,
        transparent 45%),
      radial-gradient(circle at 85% 85%, var(--mesh-1) 0%, transparent 45%),
      radial-gradient(circle at 50% 50%, var(--mesh-2) 0%, transparent 70%);
    background-attachment: fixed;
  }
}

@layer components {
  /* --- THE LIQUID GLASS ENGINE --- */

  /* Standard Card: Used for blog posts and UI blocks */
  .glass-card {
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    /* Updated Radius: Sharp enough with a little curve */
    @apply rounded-xl transition-all duration-500 ease-out-back;
  }

  .glass-card:hover {
    background: var(--glass-bg-hover);
    border-color: var(--glass-border-bright);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px -2px rgba(0, 0, 0, 0.12);
  }

  /* Dark mode specific hover shadow override */
  .dark .glass-card:hover {
    box-shadow: 0 12px 40px -2px rgba(0, 0, 0, 0.5);
  }

  /* Navigation Glass: Higher blur, specific for sticky headers */
  .glass-nav {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--glass-border);
    background-image: radial-gradient(circle at 18% 0%,
        rgba(var(--king-orange) / 0.16) 0%,
        transparent 55%),
      radial-gradient(circle at 82% 0%,
        rgba(var(--king-gold) / 0.08) 0%,
        transparent 60%),
      linear-gradient(to bottom, rgba(255, 255, 255, 0.06) 0%, transparent 60%);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45),
      0 1px 0 rgba(255, 255, 255, 0.06) inset;
  }

  /* Interactive Glass: Buttons and Toggles */
  .glass-button {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: rgb(var(--foreground-rgb));
    @apply rounded-full transition-all duration-300 active:scale-95 font-bold uppercase tracking-widest text-xs;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  }

  .glass-button:hover {
    background: var(--glass-bg-hover);
    border-color: var(--glass-border-bright);
    @apply text-king-orange border-orange-500/50;
  }

  /* Inputs */
  .glass-input {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: rgb(var(--foreground-rgb));
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    @apply rounded-lg px-4 py-3 outline-none transition-all duration-300;
  }

  .glass-input:focus {
    border-color: rgb(var(--king-orange));
    box-shadow: 0 0 0 2px rgb(var(--king-orange) / 0.2);
  }

  /* Post content styling (works for stored HTML) */
  .post-content {
    color: rgb(var(--foreground-rgb) / 0.82);
    line-height: 1.75;
  }

  .post-content h1,
  .post-content h2,
  .post-content h3 {
    color: rgb(var(--foreground-rgb));
    font-weight: 800;
    letter-spacing: -0.02em;
    margin-top: 1.25em;
    margin-bottom: 0.6em;
  }

  .post-content p {
    margin: 0.85em 0;
  }

  .post-content a {
    color: rgb(var(--king-orange));
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  .post-content ul,
  .post-content ol {
    margin: 0.9em 0;
    padding-left: 1.25em;
  }

  .post-content li {
    margin: 0.35em 0;
  }

  .post-content blockquote {
    border-left: 3px solid rgb(var(--king-orange) / 0.5);
    padding-left: 1rem;
    margin: 1.1em 0;
    color: rgb(var(--foreground-rgb) / 0.75);
  }

  .post-content code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      "Liberation Mono", "Courier New", monospace;
    font-size: 0.95em;
    background: rgb(var(--foreground-rgb) / 0.06);
    padding: 0.15em 0.35em;
    border-radius: 0.5rem;
  }

  .post-content pre {
    background: rgb(var(--foreground-rgb) / 0.06);
    border: 1px solid rgb(var(--foreground-rgb) / 0.1);
    border-radius: 0.9rem;
    padding: 1rem;
    overflow: auto;
    margin: 1.1em 0;
  }

  /* Sovereign Glow: For primary CTAs */
  .glow-orange {
    box-shadow: 0 0 30px rgba(var(--king-orange) / 0.2);
  }

  /* --- TYPOGRAPHY --- */
  .text-sovereign {
    @apply bg-gradient-to-r from-gray-900 via-gray-700 to-gray-500 dark:from-white dark:via-white dark:to-white/40 bg-clip-text text-transparent;
  }

  .text-king-orange {
    @apply bg-gradient-to-r from-orange-500 to-amber-500 bg-clip-text text-transparent font-black;
  }
}

/* Custom Scrollbar: Precision Orange */
::-webkit-scrollbar {
  width: 5px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom,
      rgba(var(--king-orange) / 0.2),
      rgba(var(--king-orange) / 0.6));
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--king-orange));
}

/* Page Transitions */
.view-fade-in {
  animation: kingFadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes kingFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Reaction Pop Animation - Instagram/Facebook style */
@keyframes reactionPop {
  0% {
    transform: scale(1);
  }

  25% {
    transform: scale(1.35);
  }

  50% {
    transform: scale(0.9);
  }

  75% {
    transform: scale(1.15);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes reactionBurst {
  0% {
    opacity: 1;
    transform: scale(0);
  }

  50% {
    opacity: 0.8;
  }

  100% {
    opacity: 0;
    transform: scale(2.5);
  }
}

.reaction-pop {
  animation: reactionPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.reaction-active {
  color: rgb(var(--king-orange)) !important;
}

/* --- SOVEREIGN DOCUMENTATION STYLES --- */
.docs-content {
  @apply text-foreground/80;
}

.docs-content h1 {
  @apply text-2xl md:text-3xl font-black tracking-tight text-foreground mb-4;
}

.docs-content h2 {
  @apply text-xl md:text-2xl font-bold text-foreground mt-10 mb-3 pb-2 border-b border-foreground/10;
}

.docs-content h3 {
  @apply text-lg font-bold text-foreground mt-8 mb-2;
}

.docs-content p {
  @apply mb-4 leading-relaxed;
}

.docs-content ul,
.docs-content ol {
  @apply mb-4 pl-6 space-y-2;
}

.docs-content li {
  @apply leading-relaxed;
}

.docs-content ul li::marker {
  color: rgb(var(--king-orange));
}

.docs-content ol li::marker {
  color: rgb(var(--king-orange));
  font-weight: 700;
}

.docs-content code {
  @apply bg-foreground/5 px-2 py-0.5 rounded-md text-sm font-mono text-king-orange;
}

.docs-content pre {
  @apply bg-foreground/5 p-4 rounded-xl overflow-x-auto mb-4 border border-foreground/10;
}

.docs-content pre code {
  @apply bg-transparent p-0;
}

.docs-content a {
  @apply text-king-orange underline underline-offset-2 hover:opacity-80;
}

.docs-content blockquote {
  @apply border-l-4 border-king-orange/50 pl-4 py-2 my-4 bg-foreground/5 rounded-r-xl italic text-foreground/70;
}

.docs-content table {
  @apply w-full border-collapse mb-4;
}

.docs-content th {
  @apply bg-foreground/5 p-3 text-left font-bold text-sm uppercase tracking-wide border-b border-foreground/10;
}

.docs-content td {
  @apply p-3 border-b border-foreground/5 text-sm;
}

.docs-content hr {
  @apply border-foreground/10 my-8;
}

/* Info/Warning/Tip boxes for docs */
.docs-callout {
  @apply p-4 rounded-xl border mb-4;
}

.docs-callout-info {
  @apply bg-blue-500/5 border-blue-500/20 text-blue-700 dark:text-blue-300;
}

.docs-callout-warning {
  @apply bg-amber-500/5 border-amber-500/20 text-amber-700 dark:text-amber-300;
}

.docs-callout-tip {
  @apply bg-green-500/5 border-green-500/20 text-green-700 dark:text-green-300;
}

/* --- ENHANCED FOCUS STATES FOR ACCESSIBILITY --- */
:focus-visible {
  outline: 2px solid rgb(var(--king-orange));
  outline-offset: 2px;
}

/* Remove outline on click but keep for keyboard navigation */
button:focus:not(:focus-visible),
a:focus:not(:focus-visible) {
  outline: none;
}

/* --- SKELETON LOADERS --- */
.skeleton {
  @apply bg-foreground/5;
  background: linear-gradient(90deg,
      rgba(var(--foreground-rgb) / 0.03) 0%,
      rgba(var(--foreground-rgb) / 0.08) 50%,
      rgba(var(--foreground-rgb) / 0.03) 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite ease-in-out;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

/* Staggered reveal animation for skeleton-to-content transition */
.skeleton-reveal {
  animation: skeletonReveal 0.4s ease-out forwards;
}

@keyframes skeletonReveal {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- HAPTIC BUTTON EFFECTS --- */
.haptic-button {
  @apply transition-all duration-200 ease-out-back;
}

.haptic-button:hover {
  @apply scale-[1.02];
}

.haptic-button:active {
  @apply scale-95;
}

/* Glow pulse on hover for primary CTAs */
.haptic-glow:hover {
  box-shadow: 0 0 30px rgba(var(--king-orange) / 0.3);
}

/* --- STAT CARD VARIANT --- */
.stat-card {
  @apply glass-card p-6 text-center;
}

.stat-value {
  @apply text-3xl md:text-4xl font-black text-king-orange;
}

.stat-label {
  @apply text-sm text-foreground/60 mt-1 uppercase tracking-wide;
}

/* --- SMOOTH 3D TILT TRANSITIONS --- */
.tilt-transition {
  transition: transform 0.15s ease-out;
  transform-style: preserve-3d;
  will-change: transform;
}

/* --- READING MODE STYLES --- */
.reading-mode-active .glass-nav {
  transform: translateY(-100%);
  opacity: 0;
  pointer-events: none;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.reading-mode-active footer {
  display: none;
}